@{
    Layout =null;
}

<!DOCTYPE html>

<html>
<head>
    <title></title>
     
    <link href="../../Content/Css/bootstrap.css" rel="stylesheet" type="text/css" />
   <link href="../../Content/Css/bootstrap-theme.css" rel="stylesheet" type="text/css" />
    @*<link href="../../Content/Css/public.css" rel="stylesheet" type="text/css" />*@

    <!--[if IE 7]>
     <link href="../../Content/Font-Awesome-3.2.1/css/font-awesome-ie7.min.css" rel="stylesheet"
        type="text/css" />
    <![endif]-->
    <script src="../../Scripts/jquery-1.8.3.min.js" type="text/javascript"></script>
    <script src="../../Scripts/json2.js" type="text/javascript"></script>
    <script language="javascript" type="text/javascript">
        $(document).ready(function () {
            var Id = $("#GUID").val(); //""表示新增  有值 表示修改
            if (Id == "" || Id == undefined) {
                $("#title").val("编辑");
            }
            else {
                $("#title").val("添加");
            }

            SetDefault(Id);
            $("#btn_save").bind("click", Save);
        });

        function Save() {
            //检查
            if (Check() == false) return;
            var Name = $("#Name").val();            
            var LoginKey = $("#LoginKey").val();
            var Address = $("#Address").val();
            var Phone= $("#Phone").val();
            var Stoped = $("#Stoped").val() == "1" ? true : false;
            // data["CreateDate"] = $("#CreateDate").val();
            // data["ModifyDate"] = $("#ModifiedDate").val();
            var Password = $("#Password").val();
            // data["OrderNumber"] = $("#OrderNumbet").val();
            //data["Creator"] = $("#CreateorId").val();
            var Id = $("#GUID").val();
            var data={Name:Name,LoginKey:LoginKey,Address:Address,Phone:Phone,Stoped:Stoped,Password:Password,Id:Id};
            $.ajax({
                url: "/Account/Save",
                data: data,
                dataType: "JSON",
                type: "POST",
                success: function (data) {
                    if (data != null) {
                        if (data.result == 0) {
                            alert("保存成功！");
                        }
                        else {
                            alert("保存失败！");
                        }
                    }
                    else {
                        alert("保存失败！");
                    }
                }

            });
        }
        function SetDefault(id) {
            if (id!= "") {
                $("#CompanyName").attr("disabled", "disabled");
                $("#ComPanyKey").attr("disabled", "disabled");
            }           
        }
        function Close() {
            if (confirm('确定要关闭吗?')) {
                window.opener = null;
                window.open("", "_self");
                window.close();
            }
        }
        function Check() {
       
            var Name = $("#Name").val();
            if (Name == "") {
                alert("公司名称不能为空！");
                return false;
            }
            var LoginKey = $("#LoginKey").val();
            if (LoginKey == "") {
                alert("账号名称不能为空！");
                return false;
            }
            var Password = $("#Password").val();
            if (Password == "") {
                alert("密码不能为空！");
                return false;
            }
            var Address = $("#Address").val();
            if (Address == "") {
                alert("地址不能为空！");
                return false;
            }
            var Phone = $("#Phone").val();
            if (Phone == "") {
                alert("电话不能为空！");
                return false;
            }
            else {
                if (istell(Phone) == false) {
                    alert("电话格式不正确！\n 格式：\n固定电话 0511-4405222 或 021-87888822 \n 或者手机号码");
                    return false;
                }
            }
            //var Stoped = $("#Stoped").val() == "1" ? true : false;
            // var Id = $("#GUID").val();
            return true;
        }
    
    //匹配国内电话号码(0511-4405222 或 021-87888822)
        function istell(str) {
    debugger
//        var result = str.match(/\d{3}-\d{8}|\d{4}-\d{7}/);
//        var phone = str.match(/^1[35]\d{9}$/);
//        if (result == null && phone == null) return false;

        var reg1 = /\d{3}-\d{8}|\d{4}-\d{7}/;
        var reg2 = /^1[35]\d{9}$/;
        var result=reg1.test(str);
        var phone=reg2.test(str);
        if(result==false && phone==false)
        {
            return false;
        }
       return true;
    }
    </script>
    <style type="text/css">
        table
        {
            width:80%;
            height:300px;
            text-align:center;
            
        }
        tr 
        {
             height:30px;    
        }
        .tdtitle
        {
            text-align:right; 
            width:100px;
               
        }
        .tdText
        {
             text-align:left;  
             width:150px; 
             
        }
        
       *{padding: 0px;margin: 0px; font-size: 13px;font-family:"微软雅黑","SimSun","Arial Narrow";color: #444;}

        .accountinfo p{width:400px;padding-bottom: 10px;}
        .accountinfo p label{display: block;height:26px;line-height: 26px;}
       
        input{border: 1px solid #ccc;border-radius: 4px;height: 24px;line-height: 24px;vertical-align:middle;}
        input[type=checkbox]{border: 1px solid #fff;}
        input[type="text"]:focus,
        input[type="password"]:focus{
            border-color: rgba(82, 168, 236, 0.8);
            outline: 0;
            outline: thin dotted \9;
            /* IE6-9 */
            -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);
            -moz-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);
            box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);
        }
        
    </style>


     
</head>
<body>
    <div style="text-align:center">
    <form  id="from" class="form-horizontal">
    <fieldset style="text-align:center">
      <div id="legend" class="">
        <legend id="title" class=""></legend>
      </div>
      <table>
        <tr>
            <td class="tdtitle"><label class="control-label" for="input01">公司名 &nbsp </label></td>
            <td class="tdText"> <input placeholder="请输入公司名称" id="Name" name="Name" value="@ViewData["Name"]" class="input-xlarge" type="text" /></td>

             <td class="tdtitle" ><label class="control-label" for="input01">订单号  &nbsp </label></td>
            <td class="tdText" ><input disabled="disabled" id="OrderNumber" value="@ViewData["OrderNumber"]" name="OrderNumber" class="input-xlarge" type="text" /></td>
        </tr>
         <tr>            
            <td class="tdtitle" ><label class="control-label" for="input01">账号  &nbsp </label></td>
            <td class="tdText" ><input placeholder="请输入用户名称" id="LoginKey" value="@ViewData["LoginKey"]" name="LoginKey" class="input-xlarge" type="text" /></td>
            <td class="tdtitle"><label class="control-label" for="input01">密码 &nbsp </label></td>
            <td class="tdText"> <input placeholder="请输入密码" id="Password" name="Password" value="@ViewData["Password"]" class="input-xlarge" type="text" /></td>

        </tr>
         <tr>
            <td class="tdtitle"><label class="control-label" for="input01">地址  &nbsp </label></td>
            <td class="tdText"> <input placeholder="请输入地址" class="input-xlarge" id="Address" name="Address" value="@ViewData["Address"]"  type="text" /></td>
            <td class="tdtitle"><label class="control-label" for="input01">电话  &nbsp </label></td>
            <td class="tdText" ><input placeholder="请输入电话" class="input-xlarge" id="Phone" name="Phone" value="@ViewData["Phone"]" type="text" /></td>
        </tr>
        
         <tr>
            <td class="tdtitle"><label class="control-label">是否可用  &nbsp </label></td>
            <td class="tdText">
              <input type="checkbox" id="selectIsStop" checked="@ViewData["Stoped"]" value="@ViewData["Stoped"]" />           
            
            </td>
            <td class="tdtitle">
                <label class="control-label" for="input01">创建人&nbsp </label>
            </td>
            <td class="tdText">          
               <input class="input-xlarge" disabled="disabled" id="CreateorId" name="CreateorId" value="@ViewData["CreateorName"]" type="text" />
            </td>
        </tr>
         <tr>
            <td class="tdtitle"><label class="control-label" for="input01">创建时间  &nbsp </label></td>
            <td class="tdText"> <input class="input-xlarge" id="CreateDate" disabled="disabled" name="CreateDate" value="@ViewData["CreateDate"]"  type="text" /></td>
            <td class="tdtitle"><label class="control-label" for="input01">修改时间  &nbsp </label></td>
            <td class="tdText" ><input  class="input-xlarge" disabled="disabled" id="ModifiedDate" name="ModifiedDate" value="@ViewData["ModifiedDate"]" type="text" /></td>
        </tr>
        <tr>
            <td colspan="4" style="text-align:center"> 
                          
                <a class="btn" id="btn_save" href="#"><i class="icon-save"></i>保存</a>  &nbsp &nbsp&nbsp&nbsp&nbsp
                <a class="btn" id="btn_close" onclick="Close()" href="#"><i class="con-off"></i>关闭</a>

            </td>
        </tr>

      </table>
      <div>       
       <input id="createorID"  type="hidden" value="@ViewData["createorID"]" />
        <input id="GUID" name="Id" type="hidden" value="@ViewData["Id"]" />
      </div>

      
    </fieldset>

   

  </form>
    </div>
</body>
</html>
