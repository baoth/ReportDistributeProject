@{
    Layout = "../Master/_CheckSession.cshtml";
}

<!DOCTYPE html>

<html>
<head>
    <title></title>
    <link href="../../Content/Css/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"
        type="text/css" />      
    <link href="../../Content/Css/bootstrap.css" rel="stylesheet" type="text/css" />
     <link href="../../Content/Css/bootstrap-theme.css" rel="stylesheet" type="text/css" />
    <link href="../../Content/Css/button.css" rel="stylesheet" type="text/css" />   
    <link href="../../Content/Css/select.css" rel="stylesheet" type="text/css" /> 

    <script src="../../Scripts/jquery-1.8.3.min.js" type="text/javascript"></script>        
   
   <script src="../../Scripts/layer.js?r=2" type="text/javascript"></script>
    <script src="../../Scripts/numeralInput.js" type="text/javascript"></script>
    <script language="javascript" type="text/javascript">
        $(document).ready(function () {
            BindEvent();
            layer.use('../../Scripts/layer.ext.js', function () {
                layer.ext = function () {
                    layer.prompt();
                }
            })
        });
        function BindEvent() {
            $("#edit").bind("click", function () {               
                //密码文本
                layer.prompt({ title: '修改密码' }, function (val, index, elem) {                    
                    Save(val);
                })
            });

        }
        function Save(password) {            
           
           debugger
            var Id = $("#GUID").val(); 
            if (Id == "" || Id == undefined) { 
                layer.msg("无效账号！");
                return;
            }
           
            var Name = $("#Name").val();
            var OrderNumber = $("#OrderNumber").val();
            var LoginKey = $("#LoginKey").val();
            var Password = password; //$("#Password").val();
            var Phone = $("#Phone").val();
            var Creator = $("#Creator").val();
            var CreateDate = $("#CreateDate").val();
            var Address = $("#Address").val();
            var Stoped = $("#Stoped").val()=="true"?true:false;          
            var data = { Name: Name, OrderNumber: OrderNumber, LoginKey: LoginKey, Address: Address, Phone: Phone, Stoped: Stoped, Password: Password, Id: Id, Creator: Creator, CreateDate: CreateDate };
                $.ajax({
                    url: "/Account/Save",
                    data: data,
                    dataType: "JSON",
                    type: "POST",
                    success: function (data) {
                        if (data != null) {
                            if (data.result == 0) {                               
                                layer.msg("操作成功！");
                                CloseBack();
                            }
                            else {
                                layer.msg("保存失败！");
                            }
                        }
                        else {
                            layer.msg("保存失败！");
                        }
                    }

                });
        }
        
        function CloseBack() {
            var urlaccount = '/FReportUserAttention/Index';
                window.parent.ControlIFrame(urlaccount);
          
        }
        
//        //校验Phone
//        function CheckPhone() {
//            var Phone = $("#Phone").val();
//            if (Phone == "") {
//                $("#SpanPhoneMsg").html("<font color='red'>电话不能为空！</font>");
//                return false;
//            }
//            else {

//                if (istell(Phone) == false) {
//                    $("#SpanPhoneMsg").html("<font color='red'>电话格式不正确！<br> 格式：固定电话 0511-4405222 或 021-87888822 <br> 或者手机号码</font>");
//                    return false;
//                }
//                var PhoneLen = Phone.length;
//                if (PhoneLen > 20) {
//                    $("#SpanPhoneMsg").html("<font color='red'>电话最长不能超过20字节！</font>");
//                    return false;
//                }
//                else {
//                    $("#SpanPhoneMsg").html("");
//                }
//            }

//            return true;
//        }

//        function CheckPassword() {
//            var Password = $("#Password").val();
//            if (Password == "") {
//                $("#SpanPasswordMsg").html("<font color='red'>密码不能为空!</font>");
//                return false;
//            }
//            else {
//                var PasswordLen = Password.length;
//                if (PasswordLen > 50) {
//                    $("#SpanPasswordMsg").html("<font color='red'>密码最长不能超过50字节！</font>");
//                    return false;
//                }
//                else {
//                    $("#SpanPasswordMsg").html("");
//                }
//            }
//            return true;
//        }
//        function CheckAddress() {
//            var Address = $("#Address").val();
//            if (Address == "") {
//                $("#SpanAddressMsg").html("<font color='red'>地址不能为空！</font>");
//                return false;
//            }
//            else {
//                var AddressLen = Address.length;
//                if (AddressLen > 150) {
//                    $("#SpanAddressMsg").html("<font color='red'>地址最长不能超过150！</font>");
//                    return false;
//                }
//                else {
//                    $("#SpanAddressMsg").html("");
//                }
//            }
//        }
//        function Check() {

//            var Name = $("#Name").val();
//            if (CheckNameData(Name) == false) {
//                return false
//            }
//            var LoginKey = $("#LoginKey").val();

//            if (CheckLoginKeyData(LoginKey) == false) {
//                return false;
//            }
//            if (CheckPassword() == false) { return false }

//            if (CheckAddress() == false) { return false }
//            
//            if (CheckPhone() == false) {return false; }
//           
//            return true;
//        }

//        //匹配国内电话号码(0511-4405222 或 021-87888822)
//        function istell(str) {          
//            var reg1 = /\d{3}-\d{8}|\d{4}-\d{7}/;
//            var reg2 = /^1[35]\d{9}$/;
//            var result = reg1.test(str);
//            var phone = reg2.test(str);
//            if (result == false && phone == false) {
//                return false;
//            }
//            return true;
//        }


    </script>
    <style type="text/css">
       
        
       *{padding: 0px;margin: 0px; font-size: 13px;font-family:"微软雅黑","SimSun","Arial Narrow";}

        .accountinfo p{width:400px;padding-bottom: 10px;}
        .accountinfo p label{display: block;height:26px;line-height: 26px;}
       
        input{border: 1px solid #ccc;border-radius: 4px;height: 24px;line-height: 24px;vertical-align:middle;}
        input[type=checkbox]{border: 1px solid #fff;}
        input[type="text"]:focus,
        input[type="password"]:focus{
            border-color: rgba(82, 168, 236, 0.8);
            outline: 0;
            outline: thin dotted \9;
            /* IE6-9 */
            -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);
            -moz-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);
            box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);
        }
         input[type="text"]
        {
             width:100%; 
             height:40px;
             padding:2px; 
               
        }
        
        .showMsg{ height:15px;
                   text-align:left;
                }
        a:visited{
        text-decoration:none;
        }
        a:hover{
        text-decoration:none;
        }
        a:active{
        text-decoration:none;
        }
        .div_item_title
        {
            text-align:left;
            font-size:x-large;
        }
        .div_item_content
        {
            text-align:left;
            padding:10px 0px 0px 100px; 
        }
        .div_item_content ul
        {
            list-style-type:none;
        }
        .div_item_List
        {
             text-align:left;  
             padding:10px 0px 0px 100px;            
        }
        .div_item_List ul
        {
            list-style-type:none;            
            
        }
       
        
        .div_item_List_table
        {
             width:600px;
             border:5px;
             
        }
        .div_item_List_tbody
        {
            text-align:left; 
        }
        .div_item_List_thead tr th
        {
            height:20px;
            border:1px solid #ff00ff;
            cellspacing:0px;
            text-align:center;
            
        }
        .div_item_List_tbody tr td
        {
             height:20px; 
             border:1px solid #ff00ff;
             cellspacing:0px;
             text-align:center;
        }
       .div_item_content a:hover, a:focus {
        color:#21b384;
        }
        .div_item_content a{
        color:Black;
        }
    </style>
    
     
</head>
<body style="background: #f6f6f6; border:0px; margin:10px;"> @*background: #f6f6f6;*@
    <div style="text-align:center;margin: 0px auto; " class="accountinfo">
    <form  id="from" class="form-horizontal">
       <div style="text-align:left; margin:0px auto;" >
        <a class="button button-rounded button-flat-highlight" id="btn_close" onclick="CloseBack()" href="#">返回</a>       
        
       </div> 
       <div style="margin: 10px auto; text-align:left; width: 100%; height: auto; "> 
        <div class="div_item_title">
            公司信息:
        </div>
        <div class="div_item_content">
            <ul>
                <li>订&nbsp 单&nbsp 号:&nbsp&nbsp&nbsp&nbsp @ViewData["OrderNumber"]</li>
                <li>公司名称:&nbsp&nbsp&nbsp&nbsp @ViewData["Name"]</li>
                <li>账&nbsp&nbsp&nbsp&nbsp&nbsp 号:&nbsp&nbsp&nbsp&nbsp @ViewData["LoginKey"]</li>                
                <li>电&nbsp&nbsp&nbsp&nbsp&nbsp 话:&nbsp&nbsp&nbsp&nbsp @ViewData["Phone"]</li>
                <li>创&nbsp 建&nbsp 人:&nbsp&nbsp&nbsp&nbsp @ViewData["CreateorName"]</li>                
                <li>创建时间:&nbsp&nbsp&nbsp&nbsp @ViewData["CreateDate"]</li>            
                <li>修改时间:&nbsp&nbsp&nbsp&nbsp @ViewData["ModifyDate"]</li>
                <li>地&nbsp&nbsp&nbsp&nbsp&nbsp 址:&nbsp&nbsp&nbsp&nbsp @ViewData["Address"]</li>
                @*<li>是否停用:"@ViewData["Stoped"]"</li>*@
                <li>密&nbsp&nbsp&nbsp&nbsp&nbsp 码:&nbsp&nbsp&nbsp&nbsp *** &nbsp&nbsp&nbsp&nbsp <a href="#" name="edit" id="edit" title="修改密码"><i class="fa fa-pencil-square-o"></i></a></li>            
            </ul>
        </div> 
        <div class="div_item_title">
          授权信息：
        </div>
        <div class="div_item_List" id="div_item_List">
            
            @{
                var str = string.Empty;
                var list = (List<weixinreportviews.Model.SS_LisenceView>)ViewData["SS_LisenceList"];
                if (list != null && list.Count > 0)
                {
                    foreach (weixinreportviews.Model.SS_LisenceView item in list)
                    {
                       <ul>
                       <li>订单号:@item.OrderNumber&nbsp&nbsp&nbsp&nbsp 授权有效期:@item.EffectiveDateDisplay 至 @item.ExpiryDateDisplay &nbsp&nbsp&nbsp&nbsp 授权点:@item.LisencePoint &nbsp&nbsp&nbsp 停用:@item.StopedDisplay</li>
                       </ul>
                    }
                }
                else
                {
                      <ul>
                       <li>无授权信息！</li>
                      </ul>  
                }
             }

            @*<table class="div_item_List_table">
                   <thead class="div_item_List_thead">
                   <tr>
                        <th>订单号</th>
                        <th>授权有效时间</th>
                        <th>授权点数</th>
                        <th>是否停用</th>
                   </tr>
                   </thead>
                   <tbody  class="div_item_List_tbody">
                        <tr>
                        <td>@ViewData["OrderNumber"]</td>
                        <td>@ViewData["OrderNumber"]</td>
                        <td>@ViewData["OrderNumber"]</td>
                        <td>@ViewData["OrderNumber"]</td>
                        </tr>
                   </tbody>
            </table>*@
          
        </div>             
       
       </div>
    

      <div>       
       <input  id="Creator"  type="hidden" value="@ViewData["Creator"]" />
       <input id="GUID" name="Id" type="hidden" value="@ViewData["Id"]" />
       <input id="AcitonId"  type="hidden" value="@ViewData["AC"]" />
       <input type="hidden" id="Stoped" name="Stoped" value="@ViewData["Stoped"]" />
       <input id="ProductKind" value="@ViewData["ProductKind"]"  name="LoginKey"  type="hidden" />
       <input id="Name" name="Name" value="@ViewData["Name"]" class="input-xlarge" type="hidden" />
       <input id="OrderNumber" value="@ViewData["OrderNumber"]" name="OrderNumber" class="input-xlarge" type="hidden" />
       <input id="LoginKey" value="@ViewData["LoginKey"]"  name="LoginKey" class="input-xlarge" type="hidden" />            
      
       <input id="Phone"  name="Phone" value="@ViewData["Phone"]" type="hidden" />
       <input id="CreateorId" name="CreateorId" value="@ViewData["CreateorName"]" type="hidden" />
       <input  id="CreateDate" name="CreateDate" value="@ViewData["CreateDate"]"  type="hidden" />
       <input id="ModifyDate" name="ModifyDate" value="@ViewData["ModifyDate"]" type="hidden" /> 
       <input id="Address"  name="Address" value="@ViewData["Address"]"  type="hidden" />
         
      </div>
      
      
      
  </form>
    </div>
</body>
</html>
